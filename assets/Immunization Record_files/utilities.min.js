/*! Copyright (c) Epic Systems Corporation 2012-2018 */
$$WP.Utilities=$$WP.Utilities||{};var $$WPUtil=$$WP.Utilities;$$WPUtil._lightboxFadeDelay=200;$$WPUtil.SetupRadioLabels=function(){var c="id",b='label[for="',a='"]';$afe.select('input[type="radio"]').change(function(){var d="selected";$.each($afe.select('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+a),function(f,e){$afe.select(b+$afe.jq(e).safeAttr(c)+a).removeClass(d)});$afe.select(b+$afe.jq(this).safeAttr(c)+a).addClass(d)}).focus(function(){$afe.select(b+$afe.jq(this).safeAttr(c)+a).addClass("focused")}).blur(function(){$afe.select(b+$afe.jq(this).safeAttr(c)+a).removeClass("focused")});$afe.select(".radiolabel").click(function(){})};$$WPUtil.SetupRadioLabelsInContainer=function(d,e){var c="id",b='label[for="',a='"]';if(d===null)return;d.find('input[type="radio"]').change(function(){var f="selected";$.each(d.find('input[type="radio"][name="'+$afe.jq(this).safeAttr("name")+a),function(g,e){d.find(b+$afe.jq(e).safeAttr(c)+a).removeClass(f)});d.find(b+$afe.jq(this).safeAttr(c)+a).addClass(f);e!==null&&e(this)}).focus(function(){d.find(b+$afe.jq(this).safeAttr(c)+a).addClass("focused")}).blur(function(){d.find(b+$afe.jq(this).safeAttr(c)+a).removeClass("focused")});d.find(".radiolabel").click(function(){})};$$WPUtil.SetDropdownContents=function(a,c,e,f){var d="disabled",b;if($$WPUtil.IsNullOrEmpty(a)||$$WPUtil.IsNullOrEmpty(c))return;if(f)c=$.parseJSON(c);b=[];$.each(c,function(a,c){b.push('<option value="'+a+'">'+c+"</option>")});a.empty();dangerou$.setHtml(a,b.join());if(e&&b.length<2)a.prop(d,true);else a.prop(d,false)};$$WPUtil.SmoothScrollToElement=function(a,c,d,b){$$WPUtil.SmoothScrollToElementWithOffset(a,c,0,d,b)};$$WPUtil.SmoothScrollToElementWithOffset=function(d,h,b,c,f){var g,e,a;if($$WPUtil.IsNullOrEmpty(h))throw"Cannot scroll to an empty target.";if($$WPUtil.IsNullOrEmpty(d))throw"Cannot scroll nothingness.";if($$WPUtil.IsNullOrEmpty(c))c=400;if($$WPUtil.IsNullOrEmpty(b))b=0;g=$afe.jq(h);e=g.offset().top;a=$afe.jq(d);a.animate({scrollTop:e-b},c,function(){var b="force_redraw";f&&f();a.addClass(b);window.setTimeout(function(){a.removeClass(b)},1)})};$$WPUtil.IsNullOrEmpty=function(a){return typeof a==="undefined"||a===null||a===""};$$WPUtil.AddThrottledListener=function(e,f,b,d,a){var c;if($$WPUtil.IsNullOrEmpty(e))throw"Element to bind cannot be empty";if($$WPUtil.IsNullOrEmpty(f))throw"You must specificy at least one event to throttle";if(!$.isNumeric(d))d=100;if($$WPUtil.IsNullOrEmpty(a)&&$$WPUtil.IsNullOrEmpty(b))b="change";if(!$.isFunction(a))a=null;c=false;$afe.jq(e).bind(f,function(f){if(c)return;c=true;window.setTimeout(function(){!$$WPUtil.IsNullOrEmpty(b)&&$afe.jq(e).trigger(b);!$$WPUtil.IsNullOrEmpty(a)&&a(f);c=false},d)})};$$WPUtil.AddToggleListener=function(j,b,c,e,d,g,f,k,a,i){var h;if($$WPUtil.IsNullOrEmpty(b))throw"Toggle control ID is required.";if($$WPUtil.IsNullOrEmpty(c))c="click";if(a!==true&&a!==false)a=true;$$WPUtil.GetUniqueJQueryById(j,b).bind(c,function(o){var c="data-toggled",n,l,m;n=$$WPUtil.GetUniqueJQueryById(j,b).safeAttr("data-toggle-for");if(!$$WPUtil.IsNullOrEmpty(n)){l=$afe.select("#"+n);m=l.safeAttr(c);h=$afe.jq(k);$.each(h,function(h,b){var a;$afe.select('[data-toggle-for="'+$afe.jq(this).safeAttr("id")+'"]').removeClass(e).addClass(d);a=$afe.jq(b);a.safeAttr(c,"false");a.removeClass(g).addClass(f)});$$WPUtil.SetElementToggled(l,$afe.jq(this),m!=="true",g,f,e,d);$.isFunction(i)&&i(m==="true",o)}return!a})};$$WPUtil.SetElementToggled=function(j,i,h,f,e,d,c){var g="data-toggled",a,b;b=$afe.jq(j);if(!$$WPUtil.IsNullOrEmpty(i))a=$afe.jq(i);else a=$afe.select('[data-toggle-for="'+b.safeAttr("id")+'"]');if(h==="true"||h===true){b.safeAttr(g,"true");b.removeClass(e).addClass(f);a.length>0&&a.removeClass(c).addClass(d)}else{b.safeAttr(g,"false");b.removeClass(f).addClass(e);a.length>0&&a.removeClass(d).addClass(c)}};$$WPUtil.ElementHasXOverflow=function(a){return a.offsetWidth<a.scrollWidth};$$WPUtil.ElementHasYOverflow=function(d){var a=$afe.select("html").height(),b=d.offsetHeight,c=d.scrollHeight;return a>b?b<c:a===b&&a===c?$afe.jq(window).height()<a:void 0};$$WPUtil.ElementHasScrolledToBottom=function(c,b){var g=$afe.jq(c),e=$afe.select("html").height(),f=c.offsetHeight,d=c.scrollHeight,a;if(!$.isNumeric(b))b=.8;a=g;if(e===f&&e===d)a=$afe.jq(window);return a.scrollTop()+a.innerHeight()>=d*b};$$WPUtil.GUIDPrefix=function(a){return a?a+"_":""};$$WPUtil.GetUniqueJQueryById=function(a,b){return $afe.select("#"+$$WPUtil.GUIDPrefix(a)+b)};$$WPUtil.GetStringResource=function(d,c,b){var a;if(c){a=$$WPUtil.GetUniqueJQueryById(d,"resources").find('div[data-rsrc-id="'+c+'"]').html();if(!$$WPUtil.IsNullOrEmpty(b))a=$$WPUtil.ReplaceStringMnemonics(a,b)}return a||""};$$WPUtil.ReplaceStringMnemonics=function(a,b){var c;if($$WPUtil.IsNullOrEmpty(a))return null;!$$WPUtil.IsNullOrEmpty(b)&&$.each(b,function(b,d){c=new RegExp("@MYCHART@"+b+"@","gi");a=a.replace(c,d)});return a};$$WPUtil.PopulateComplexTemplate=function(h,f,i,g,j,c){var a,d,e,b;if($$WPUtil.IsNullOrEmpty(f))throw"You must supply a template ID";if($$WPUtil.IsNullOrEmpty(c))c=0;if($$WPUtil.IsNullOrEmpty(g))g={};b=(h?h+"_":"")+f+"_"+c;a=$$WPUtil.GetUniqueJQueryById(h,f).clone();if(a.safeAttr("data-template-children-only")==="true")a=a.children();else if(a.safeAttr("data-template-no-id")==="true")a.safeAttr("id","");else a.safeAttr("id",b);b=b+"_";d=$$WPUtil.RecurseComplexTemplate(a,g,j,b);if(!$$WPUtil.IsNullOrEmpty(i)){e=$afe.jq(i);e.empty();d.safeAppendTo(e)}return d};$$WPUtil.RecurseComplexTemplate=function(a,b,d,f,h,c){var i,g,e;$.each(a,function(A,e){var n="data-template-type",m="data-template-source",l="data-template-group-source",g="data-template-group",r,s,p,v,q,j,u,w,i,y,x,t,k,o,z;e=$afe.jq(e);a=a;r=e.safeAttr(g);s=e.safeAttr(l);i=e.safeAttr(m);t=e.safeAttr("data-template-id");q=j=u=false;z=(e.safeAttr(n)||"").split(" ");$.each(z,function(c,b){var a=true;switch(b){case"collection":q=a;break;case"object":j=a;break;case"value":u=a;break;case"nullable":w=a;break;case"fill":x=a}});p=!$$WPUtil.IsNullOrEmpty(r)&&!$$WPUtil.IsNullOrEmpty(s);v=!$$WPUtil.IsNullOrEmpty(r)&&q;if((j||u)&&w&&$$WPUtil.IsNullOrEmpty(b[i])||x)a=a.not(e.empty().remove());else if((q||j||p)&&!v){if(p){e=e.parent().children('[data-template-group="'+r+'"]');i=s}if($$WPUtil.IsNullOrEmpty(i))o=b;else o=b[i];if(j)o=[o];if(!j&&!$$WPUtil.IsNullOrEmpty(t))k=0;$.each(o,function(j,c){var b,h;if($.isFunction(d))c=d(i,j,c);if(!$$WPUtil.IsNullOrEmpty(c)){b=e.clone();if(p){b.removeAttr(g);b.removeAttr(l)}else{b.removeAttr(n);b.removeAttr(m)}b.safeInsertBefore(e.get(0));h=$$WPUtil.RecurseComplexTemplate(b,c,d,f,t,k);if($.isNumeric(k))k=k+1;b.safeReplaceWith(h);a=a.add(h)}});a=a.not(e.empty().remove())}else if(!$$WPUtil.IsNullOrEmpty(e.safeAttr(g)))return;else if(e.children().length>0){y=$$WPUtil.RecurseComplexTemplate(e.children(),b,d,f,h,c);e.children().remove();y.safeAppendTo(e);a=a.not(e).add(e)}});i=$$WPUtil.SerializeNodes(a);if(typeof b==="string")b={"#Value":b};e=$.isNumeric(c);b["#ID"]=f+(h||"")+(h&&e?"_"+c:"");b["#NUM"]=e?c:"";g=dangerou$.parseHtml($$WPUtil.ReplaceTemplateMnemonics(i,b));$.each(g,function(h,g){var e="data-href-url",d="data-headers",c="data-src-url",b,f,a=$afe.jq(g);b=a.safeAttr(c);if(!$$WPUtil.IsNullOrEmpty(b)){a.safeAttr("src",b);a.removeAttr(c)}f=a.safeAttr(d);if(!$$WPUtil.IsNullOrEmpty(f)){a.safeAttr("headers",f);a.removeAttr(d)}b=a.safeAttr(e);if(!$$WPUtil.IsNullOrEmpty(b)){a.safeAttr("href",b);a.removeAttr(e)}});return g};$$WPUtil.SerializeNodes=function(c){var b,a="";if(typeof XMLSerializer==="function"){b=new XMLSerializer;$.each(c,function(d,c){a=a+(c.outerHTML||b.serializeToString(c))})}else $.each(c,function(c,b){a=a+(b.outerHTML||b.xml)});return a};$$WPUtil.ReplaceTemplateMnemonics=function(a,c){var b;if($$WPUtil.IsNullOrEmpty(a))return null;!$$WPUtil.IsNullOrEmpty(c)&&$.each(c,function(d,c){b=new RegExp("__"+d+"__","gi");if(typeof c==="string")c=HTMLEncode(c);a=a.replace(b,c)});return a};$$WPUtil.CenterContainerOnPage=function(d,c){var b,e,a=0;e=$afe.jq(window).height();b=$afe.jq(d);c&&$$WPUtil.setScrollTop(0);a=$$WPUtil.getScrollTop()+($afe.jq(window).height()-b.height())/2;if(a<0)a=0;b.css({top:a+"px"})};$$WP.Utilities.isAbsoluteURL=function(b){var a=new RegExp("^(?:[a-z]+:)?//","i");return a.test(b)};$$WPUtil.ShowUrlInLightbox=function(b,f,a,e,d){var c;c=b.url||b;if(!c)return;$.ajax($.extend({url:c,type:"GET",dataType:"html",success:function ShowUrlInLightbox$success(g){var c="#ajaxspinner",f,b;$$WPUtil.ShowLightboxOverlay(null,e,d);b=$afe.select("#lightbox");dangerou$.setHtml(b,"");f=$afe.select(c).length>0;dangerou$.setHtml(b,g);f&&b.find(c).remove();$afe.select("body").addClass("showLightBox");b.removeClass("hidden").show(function ShowUrlInLightbox$show(){$$WPUtil.CenterContainerOnPage(b)}).promise().done(function ShowUrlInLightbox$done(){a&&typeof a==="function"&&a()})}},f||b.settings))};$$WPUtil.ShowContainerAsLightbox=function(b,d,c){var a;$$WPUtil.ShowLightboxOverlay(b,d,c);a=$afe.jq(b);a.show($$WPUtil._lightboxFadeDelay,function(){a.find(".slider").trigger("matchCardHeights");$$WPUtil.CenterContainerOnPage(b)})};$$WPUtil.ShowLightboxOverlay=function(d,a,c){var b=$afe.select("#lightbox_overlay");b.off("click");b.on({click:function(){$$WPUtil.HideLightbox(d,c)}});b.show($$WPUtil._lightboxFadeDelay).promise().done(function(){a&&typeof a==="function"&&a()})};$$WPUtil.HideLightbox=function Epic$PatientAccess$Utilities$HideLightbox(b,a){if($$WPUtil.PreventHideLightbox!==true){!$$WPUtil.IsNullOrEmpty(b)&&$afe.jq(b).hide($$WPUtil._lightboxFadeDelay);$afe.select(".lb_content").hide($$WPUtil._lightboxFadeDelay);$afe.select("#lightbox_overlay").hide($$WPUtil._lightboxFadeDelay);$afe.select("body").removeClass("showLightBox");a&&typeof a==="function"&&a()}};$$WPUtil.AjaxifyForm=function Epic$PatientAccess$Utilities$AjaxifyForm(d,c,b,a,e){if(!c)return;c.unbind("submit").bind("submit",function(){var f=this;if(!$$WPUtil.ValidateForm(d,c))return false;$.ajax({url:$afe.jq(f).safeAttr("action"),type:$afe.jq(f).safeAttr("method"),data:$afe.jq(f).serialize(),context:$afe.jq(f),datatype:"json",error:$$WPUtil.DisplayAjaxError,statusCode:{404:function(){}},success:function(c){var f="function";if(c.action==="showerrors"){$$WPUtil.WriteErrorsToForm(d,$afe.jq(this),c.errors,c.Mnemonics);if(b&&typeof b===f)try{b(c.errors)}catch(i){$$WPUtil.ShowUrlInLightbox("Error")}return}$$WPUtil.RunCallbackForType(e);if(a&&typeof a===f){var g=true;try{g=a(c)}catch(h){}if(!g)return}if(c.action==="lightbox"&&c.url.length>0){$$WPUtil.ShowUrlInLightbox(c);return}if(c.action==="redirect"){window.location.assign(c.url||"/");return}}});return false})};$$WPUtil.CallbackTypeEnum={Authenticate:"Authenticate"};$$WPUtil.RegisterCallbackForType=function Epic$PatientAccess$Utilities$SetCallbackForType(c,a){var b=$$WPUtil.CallbackTypeEnum[c];if(!$$WP.CallbacksForType)$$WP.CallbacksForType={};if(!$$WPUtil.IsNullOrEmpty(b)&&a&&typeof a==="function")$$WP.CallbacksForType[b]=a};$$WPUtil.RunCallbackForType=function Epic$PatientAccess$Utilities$RunCallbackForType(c){var a,b=$$WPUtil.CallbackTypeEnum[c];if(!$$WPUtil.IsNullOrEmpty(b)){a=$$WP.CallbacksForType[b];a&&typeof a==="function"&&a()}};$$WPUtil.DisplayAjaxError=function Epic$PatientAccess$Utilities$DisplayAjaxError(c,a){alert("An error occurred while processing the request: "+a)};$$WPUtil.ValidateForm=function Epic$PatientAccess$Utilities$ValidateForm(f,a){var c="field-validation-valid",b="field-validation-error",e={},d=false;a.find("[data-form-valmsg-for="+a.safeAttr("id")+"]").removeClass(b).addClass(c).empty();a.find("span[data-valmsg-for]").removeClass(b).addClass(c).empty();a.find("input").each(function(){var a=this;if($afe.jq(a).safeAttr("data-val")==="true"){var b=$afe.jq(a).safeAttr("data-val-required");if(b&&a.value===""){e[$afe.jq(a).safeAttr("name")]=b;d=true}else $afe.jq(a).removeClass("input-validation-error")}});if(d){$$WPUtil.WriteErrorsToForm(f,a,e);return false}return true};$$WPUtil.WriteErrorsToForm=function Epic$PatientAccess$Utilities$WriteErrorsToForm(l,c,a,k){var i="validation-summary-errors",h="validation-summary-valid",g='div[data-valmsg-summary="true"]',e="field-validation-error",d="field-validation-valid",f,b,j={};a=$$WPUtil.MapValidationCodesFromServer(l,a,k);c.find("input").each(function(){var f='span[data-valmsg-for="',b="input-validation-error",g=this,h=$afe.jq(g).safeAttr("name"),k=$afe.jq(g).safeAttr("id"),i=a[h];if(j[h]===1)return;if(i){$afe.jq(g).addClass(b);dangerou$.setHtml(c.find(f+k+'"]').removeClass(d).addClass(e),i);delete a[h];j[h]=1}else{$afe.jq(g).removeClass(b);c.find(f+k+'"]').removeClass(e).addClass(d).empty()}});b=a.formlevelmsg;if(b){dangerou$.setHtml(c.find(g).removeClass(h).addClass(i).find("ul").safeAppend("li"),b);delete a.formlevelmsg}else c.find(g).removeClass(i).addClass(h).find("ul").empty();for(f in a)if(a.hasOwnProperty(f)){b=a[f];b&&dangerou$.setHtml(c.find('span[data-valmsg-for*="'+f+'"]').removeClass(d).addClass(e),b)}};$$WPUtil.MapValidationCodesFromServer=function Epic$PatientAccess$Utilities$MapValidationCodesFromServer(d,f,c){var a,e,b;e=$$WPUtil.GetUniqueJQueryById(d,"resources");a={};$.each(f,function(e,g){var f;if(!$$WPUtil.IsNullOrEmpty(c))f=c[e];b=$$WPUtil.GetStringResource(d,g,f);if(b)a[e]=b;else a[e]=g});return a};$$WPUtil.LogAction=function(d,b,a){var c=$afe.select("#logActionUrl").html();$.post(c,{action:b,mnemonicsString:JSON.stringify(a)})};$$WPUtil.getScrollNode=function(){var a;if(isDataTile())a=parent.document;else a=document;return a.scrollingElement||a.documentElement};$$WPUtil.ScrollableBody=function(){var a;a=$$WPUtil.getScrollNode();return $afe.jq(a)};$$WPUtil.getScrollTop=function(){var a;a=$$WPUtil.getScrollNode();return a.scrollTop};$$WPUtil.setScrollTop=function(a){var b;if($$WPUtil.IsNullOrEmpty(a))a=0;b=$$WPUtil.getScrollNode();b.scrollTop=a};$$WPUtil.getScrollLeft=function(){var a;a=$$WPUtil.getScrollNode();return a.scrollLeft};$$WPUtil.setScrollLeft=function(a){var b;if($$WPUtil.IsNullOrEmpty(a))a=0;b=$$WPUtil.getScrollNode();b.scrollLeft=a};$$WPUtil.ActivateHelp=function(a){$afe.select('a[data-lightbox-guid="'+a+'"]').each(function(){$afe.jq(this).unbind("click").bind("click",function(){$$WPUtil.ShowContainerAsLightbox($$WPUtil.GetUniqueJQueryById(a,$afe.jq(this).safeAttr("data-lightbox-id")))})})};$$WPUtil.SetupCustomTabbingForFields=function WPControl$LoginController$_SetupTabbing(b){var c=null,d,e,f,a;f=b[b.length];for(a=0;a<b.length;a++){d=a>0?b[a-1]:c;e=a<b.length-1?b[a+1]:c;b[a].bind("keydown",{$tabFrom:d,$tabTo:e},$$WPUtil._CustomTabbingForField);d!==c&&e!==c&&b[a].safeAttr("tabindex",-1)}};$$WPUtil._CustomTabbingForField=function WPControl$LoginController$_SetupTabbing(a){var b;if(a.keyCode===9){b=a.shiftKey?a.data.$tabFrom:a.data.$tabTo;if(b!==null){b.focus();a.stopPropagation();a.preventDefault()}}};$$WPUtil.quickPopup=function(b,a){if(!$.isArray(b))a=$$WPUtil.mergeObjects({Components:b},a,true);else a.Components=b;var c=new $$WPContain.Popup(a);c.show(true);return c};$$WPUtil.SafeToRedirect=function WPUtil$SafeToRedirect(a,c){var b;if(WP.Events.showBeforeUnloadMessage()){b=new $$WPComp.SafeToRedirectComponent({callback:a});return $$WPUtil.quickPopup(b,{positioningFunction:c})}a(true)};$$WPUtil.TryRedirect=function WPUtil$TryRedirect(a,h,e,b){var g=function WPUtil$TryRedirect(m){var d="Messaging.Review",c="PickOrganization";if(!m)return;var f,k,l,g=$$WPUtil.parseQueryString(a).mode,o=$$WPUtil.queryString("mode"),n=$$WPUtil.TryRedirect._mustPickOrganization,i={msgoptions:$$WP.Strings.get(c,d),medrefill:$$WP.Strings.get(c,d),custsvc:$$WP.Strings.get(c,d),refrequest:$$WP.Strings.get(c,d)},j=function(a,e,c){var b="netredirect",d;if($$WPUtil.IsH2GActivity(a)){if(a.toLowerCase().indexOf(makeLink("").toLowerCase())===-1)a=makeLink(a);window.location=a;return}if(c&&c!=="1"&&!c.IsLocal){if(a.indexOf(makeLink(""))>-1)d=a.substr(a.indexOf(makeLink(""))+makeLink("").length);else d=a;if(typeof c==="string")$$WP.CommunityUtilities.getOrganization(c,function(c,d,a){$$WP.CommunityUtilities.openDeepLink(b,a,{targetUrl:c},d?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)},[d,e]);else $$WP.CommunityUtilities.openDeepLink(b,c,{targetUrl:d},e?$$WP.CommunityUtilities.openDeepLinkType.InNewTab:$$WP.CommunityUtilities.openDeepLinkType.InPopup)}else if(e)openWindow(a);else window.location=a};if(!e){var h=$$WPUtil.parseQueryString(a).local;if(h!==undefined){if(h==="1")f=false;else if(h==="0")f=true}else{l=n.indexOf(g);f=l>-1}if(f){if(g in i)k=i[g];$$WP.CommunityUtilities.pickOrganization(function(c,a){if(a==="close")return;j(c,b,a)},k,[a],g);return}else e="1"}j(a,b,e)},c,d,f;c=window.location.protocol+"//"+window.location.hostname;c=c.toLowerCase();d=a.toLowerCase();f=d.substring(0,4);b=b||d.indexOf(c)<0&&f==="http";if(b)g(true);else $$WPUtil.SafeToRedirect(g,h)};$$WPUtil.TryRedirect._mustPickOrganization=["msgoptions","refrequest"];$$WPUtil.DidNotRedirect=function WPUtil$DidNotRedirect(){$$WPComp.SafeToRedirectComponent.canceledRedirect()};$$WPUtil.setActivity=function WPUtil$setActivity(){if(checkActivity&&checkActivity.SessionTimeOut)if($$WPUtil.setActivity.msSinceLastActivity()>=checkActivity.SessionTimeOut){document.write("");window.location=makeLink("default.asp");return}$$WPUtil.setActivity.__lastActivity=new Date;checkIfPopup()&&window.opener.$$WPUtil.setActivity()};$$WPUtil.checkActivity=function(){checkActivity()};$$WPUtil.setActivity.msSinceLastActivity=function WPUtil$activity$timePassed(){return new Date-$$WPUtil.setActivity.__lastActivity};$$WPUtil.copyObject=function Utilities$CopyObject(a){if(!a)return null;if(!$.isArray(a))return $$WPUtil.mergeObjects(a,{},false,true);var c,b,d;c=[];d=a.length;for(b=0;b<d;b++)c.push(a[b]);return c};$$WPUtil.mergeObjects=function Utilities$mergeObjects(d,a,g,e){($.isArray(d)||$.isArray(a))&&console.error("mergeObjects cannot be used on arrays");a=a||{};if(g)a=$$WPUtil.copyObject(a);if(!d)return a;var b,c,f;f=function(a){return a&&typeof a==="object"&&!(a instanceof jQuery)&&!$$WPComp.isComponent(a)&&!$.isArray(a)&&!(a instanceof Handlebars.SafeString)};for(c in d){b=d[c];if(typeof b!=="undefined")if(f(b))a[c]=$$WPUtil.mergeObjects(d[c],a[c],false,e);else if(e||!a[c]){if($.isArray(b))b=$$WPUtil.copyObject(b);a[c]=b}}return a};$$WP.Utilities.guaranteeExistence=function Utilities$GuaranteeExistence(a,e,d){a=a||$$WP;for(var c=e.split("."),f=c.length-1,b=0;b<f;b++){if(!a[c[b]])a[c[b]]={};a=a[c[b]]}if(!a[c[b]])a[c[b]]=d||{};return a};$$WPUtil.preventEvent=function Utilities$preventEvent(a){a.stopPropagation();a.preventDefault();return false};$$WPUtil.parseQueryString=function Util$parseQS(f){for(var b=f.substr(f.indexOf("?")+1).split("&"),e={},c,d,a=0;a<b.length;a++){c=b[a].indexOf("=");if(c===-1&&a>0)e[d]+="&"+b[a];else{d=b[a].substr(0,c).toLowerCase();e[d]=b[a].substr(c+1)}}return e};$$WPUtil.queryString=function Utilities$queryString(a){if(!$$WPUtil.queryString.parsed)$$WPUtil.queryString.parsed=$$WPUtil.parseQueryString(window.location.search);return $$WPUtil.queryString.parsed[a]||""};$$WPUtil.verticalScrollBarWidth=function $$WPUtil$verticalScrollBarWidth(){if(!$$WPUtil.verticalScrollBarWidth._cached){var a,d,c,b;a=$afe.renderTemplate($$WP.Templates.scrollbarwidth);d=a.children(0).get(0);document.body.appendChild(a.get(0));c=d.offsetWidth;a.css("overflow","scroll");b=d.offsetWidth;if(b===c)b=a.get(0).clientWidth;a.remove();$$WPUtil.verticalScrollBarWidth._cached=c-b}return $$WPUtil.verticalScrollBarWidth._cached};$$WPUtil.preventAndroidLongPress=function(b,a){if(navigator.userAgent.indexOf("Android")>=0){if(b.length===1&&!a)a=b;if(a)a.on("contextmenu",b.selector,function(a){a.preventDefault()})}};$$WPUtil.isBrowserCapableOf=function(c,b){var a;switch(c){case"flexbox":return document.body.style.flex!==undefined;case"input":a=document.createElement("input");$afe.jq(a).safeAttr("type",b.type);return a.type===b.type;case"touchEvents":return"ontouchstart"in window||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0}};$$WPUtil.isValidBrowser=function(){return!!window.HTMLCanvasElement&&!window.ActiveXObject};$$WPUtil.addUrlParameter=function(a,c,b){if(a.indexOf("?")===-1)a+="?";else if(a[a.length-1]!=="&")a+="&";return a+c+"="+b};$$WPUtil.isNaN=function(a){return isNaN(a)||!a&&a!==0};$$WPUtil.confirmFormSubmission=function(b,d,c,a,f,g,e){if(c)$$WPUtil.quickMessageBoxByEnum(d,c,$$WPUtil.confirmFormSubmission.submitForm,[b,a]);else $$WPUtil.quickMessageBox(d,g,f,$$WPUtil.confirmFormSubmission.submitForm,[b,a],"",e);return false};$$WPUtil.confirmFormSubmission.submitForm=function(a,b,c){var d;if(typeof b==="function")if(b(a,c)===false)return;if(c===$$WP.Components.TOOLBARIDENTIFIER+"continue"){d=a.onclick;a.onclick=null;a.click();a.onclick=d}};$$WPUtil.quickMessageBoxByEnum=function(j,d,h,g,i){var e="inlinedelete",a=$$WPUtil.quickMessageBoxByEnum.typeEnum,f,c,b;d=d||$$WPUtil.quickMessageBoxByEnum.typeEnum.ContinueGoback;switch(d){case a.ContinueGoback:b=$$WP.Strings.getNamespace("Global.Confirm.ContinueGoback");break;case a.DeleteGoback:b=$$WP.Strings.getNamespace("Global.Confirm.DeleteGoback");break;case a.YesNo:b=$$WP.Strings.getNamespace("Global.Confirm.YesNo");break;case a.Ok:b=$$WP.Strings.getNamespace("Global.Confirm.Ok");break;case a.RemoveGoback:b=$$WP.Strings.getNamespace("Global.Confirm.RemoveGoback");break;case a.RestoreGoback:b=$$WP.Strings.getNamespace("Global.Confirm.RestoreGoback");break;default:return}c=[new $$WPComp.ComplexObjects.Button(b.getStringForTemplate("Continue"),null,"completeworkflow","continue"),new $$WPComp.ComplexObjects.Button(b.getStringForTemplate("Cancel"),null,"previousstep","cancel")];switch(d){case a.RemoveGoback:c[0].Class=e;break;case a.RestoreGoback:c[0].Class="inlinesave";break;case a.DeleteGoback:c[0].Class=e;break;case a.Ok:c.pop();c[0].Class="otherbutton"}f=b.getStringForTemplate("Title");return $$WPUtil.quickMessageBox(j,f,c,h,g,i)};$$WPUtil.quickMessageBoxByEnum.typeEnum={ContinueGoback:1,DeleteGoback:2,YesNo:3,Ok:4,RemoveGoback:5,RestoreGoback:6};$$WPUtil.quickMessageBox=function(h,a,c,f,d,g,e){var i=$$WP.Strings.getNamespace("Global.Confirm"),b;b=new $$WPComp.MessageComponent({TitleText:!a&&a!==""?i.getStringForTemplate("GenericConfirmTitle"):a,Message:h,callback:f,CallbackArgs:d,ToolbarButtons:c});return $$WPUtil.quickPopup(b,{Size:c.length<3?$$WPContain.Popup.SizeEnum.SMALL:$$WPContain.Popup.SizeEnum.MEDIUM,Class:g,HasBackButton:e})};$$WPUtil.generateGUID=function(){$$WPUtil.generateGUID._last=$$WPUtil.generateGUID._last||0;$$WPUtil.generateGUID._last++;return $$WPUtil.generateGUID._last};$$WPUtil.generateGUID._last;$$WPUtil.getDomain=function(a){try{return a.protocol+"//"+a.host}catch(b){return null}};$$WPUtil.canWriteCookies=function(){var a="testCookie";setCookie(a,"testValue",true);var c=getCookie(a,true),b=c!=="";b&&deleteCookie(a,true);return b};$$WPUtil.cssValueToPixels=function(a){if(a.indexOf("rem")>-1){if(!$$WPUtil.cssValueToPixels.emSize)$$WPUtil.cssValueToPixels.emSize=parseFloat($afe.select("body").css("font-size"));return Math.round(parseFloat(a,10)*$$WPUtil.cssValueToPixels.emSize)}else if(a.indexOf("px")>-1)return parseFloat(a,10);else!isNaN(parseFloat(a,10))&&console.log("CSS value cannot be converted to pixels: "+a)};$$WPUtil.instantiateComponent=function(c,d,b){var a={};a.SupportedComponents=c;a.$parent=$afe.select("#"+d);if(b)a.ComponentProperties=b;return new $$WPContain.HTMLTemplateContainer(a)};$$WPUtil.positionElementNear=function(f,l){var k="Popup cannot be fit to screen",i=null,h=false,j,b,c,a,g,e,d;f.removeClass("onRight onLeft onBottom onTop");j=l.parents("#main, #sidebar, #lightbox, .Popup, .direct_message");c=l.boxModel(h);b=j.boxModel(h);if(j.safeAttr("id")==="main"||j.safeAttr("id")==="sidebar"){b.height-=$afe.select("#footer").outerHeight(h);b.bottom=b.top+b.height}a=f.boxModel(h);g={toRight:b.right-a.right,toLeft:a.left-b.left,above:a.top-b.top,below:b.bottom-a.bottom};d=i;e=i;if(g.toRight>c.width){d=a.right;f.addClass("onRight")}else if(g.below>c.height){f.addClass("onBottom");e=a.bottom}else if(g.toLeft>c.width){f.addClass("onLeft");d=a.left-c.width}else if(g.above>c.height){f.addClass("onTop");e=a.top-c.height}if(d!==i)if(a.bottom-c.height>b.top)e=a.bottom-c.height+2;else if(a.top+c.height<b.bottom)e=a.top-2;else{e=a.top+a.height/2-c.height/2;if(e<b.top||e>b.bottom){e=b.top;$$WP.Debug.log(k)}}else if(e!==i)if(a.left+c.width<b.right)d=a.left-2;else if(a.right-c.width>b.left)d=a.right-c.width+2;else{d=a.left+a.width/2-c.width/2;if(b.width<c.width){d=b.left;l.style.width=b.width}if(d<b.left||d>b.right){d=b.left;$$WP.Debug.log(k)}}else{$$WP.Debug.log(k);f.addClass("onRight");e=a.top;d=a.right}return{top:e,left:d}};$$WPUtil.handlePopupInstructions=function(n,h){var e="isblur",o="data-ispositioned",j="allowOverflow",i="showPopup",g="altnode",c="img",d,a,l,b,k,f,m;h=h||"Global";d=$afe.jq(n.target);if(!d.hasClass("popupiconcontainer"))d=d.parents(".popupiconcontainer").first();if(d.length===0)return;a=d.find(".popupInstructions");b=a.siblings(".popupinstructionsicon");l=a.parents("#main, #sidebar, .Popup");if(n.type==="focus"||n.type==="mouseenter"){k="PopupHelpIconAltFull";if(b.find(c).data(g))k=b.find(c).data(g)+"Full";b.find(c).safeAttr("alt",$$WP.Strings.get(k,h));a.removeClass("hidden isblur");b.addClass(i);l.addClass(j);if(b.safeAttr(o)!=="1"){f=$$WPUtil.positionElementNear(b,a);m=b.offset();f.top-=m.top;f.left-=m.left;a.css({left:f.left+"px",top:f.top+"px"});a.safeAttr(o,"1")}}else{a.addClass(e);window.setTimeout(function(f,b,a){var d=b.find(c).data(g)||"PopupHelpIconAlt";if(a.hasClass(e)){f.removeClass(j);a.removeClass(e);a.addClass("hidden");b.removeClass(i);b.find(c).safeAttr("alt",$$WP.Strings.get(d,h))}},100,l,b,a)}};$$WPUtil.printHtmlClass=function(b){var a;a=$afe.select("."+b);$$WPUtil.printElement(a)};$$WPUtil.printImage=function(b){var a=dangerou$.parseHtml("<img src='"+b+"' style='height: 100%' />");$$WPUtil.printElement(a)};$$WPUtil.printElement=function(d){var c,a,b;a=openWindow("","Print","resizable");b=$afe.jq(d);c=b.get(0).outerHTML;a.focus();dangerou$.setHtml(a.document.body,c);window.setTimeout(function(a){a.print();a.close()},10,a)};$$WPUtil.postify=function(c){var b={},a=function(d,e){for(var c in d){var f=isFinite(c)?(e!=""?e:"")+"["+c+"]":(e!=""?e+".":"")+c;switch(typeof d[c]){case"number":case"string":case"boolean":b[f]=d[c];break;case"object":a(d[c],f!=""?f:c)}}};a(c,"");return b};$$WPUtil.postForm=function(f,c,g){var a=$afe.jq(document.createElement("form"));a.safeAttr("method","post");a.safeAttr("action",f);a.safeAttr("target",g);if(c)for(var d=0;d<c.length;d++){var e=c[d],b=$afe.jq(document.createElement("input"));b.safeAttr("type","hidden");b.safeAttr("name",e.Name);b.safeAttr("value",e.Value);a.safeAppend(b)}$afe.select("body").safeAppend(a);a.submit();$afe.select("body").remove(a)};$$WPUtil.generateRandomGUID=function generateRandomGUID(){var c="",a,b;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(b=0;b<16;b++)c+=a.charAt(Math.floor(Math.random()*a.length));return c};$$WPUtil.highlightNodeText=function(d,g){var b,e,a,c,f;if(d===null)return;b=d.childNodes;if(b===null||b.length===0)return;try{e=new RegExp("("+g+")","gi");for(c=0;c<b.length;c=c+1){a=b[c];if(a!==null)if(a.nodeType===3){if(e.test(a.nodeValue)){f=document.createElement("span");dangerou$.setHtml(f,HTMLEncode(a.nodeValue).replace(e,'<span class="hilite">$1</span>'));d.insertBefore(f,a);d.removeChild(a)}}else a.nodeType===1&&$$WPUtil.highlightNodeText(a,g)}}catch(h){}};$$WPUtil.createAriaLabel=function(c,d){var b=$afe.select("#"+c),a=$afe.select("#arialabels");if(b.length===0){if(a.length===0)a=$afe.jq(document.body).safeAppend($$WP.SimpleTemplates.Div({id:"arialabels"}));b=$$WP.SimpleTemplates.Span({"class":"clearlabel",id:c},d);a.safeAppend(b)}};$$WPUtil.addPopupListener=function(a){if(a===null||typeof a==="undefined")a=$afe.jq("#main");a.find(".popupiconcontainer").each(function(){var a="blur focus",b=$afe.jq(this);b.unbind().hover($$WPUtil.handlePopupInstructions);b.find(".popupinstructionsicon").unbind().on(a,$$WPUtil.handlePopupInstructions);b.find(".popupInstructions").unbind().on(a,$$WPUtil.handlePopupInstructions)})};$$WPUtil.AddPopupListener=$$WPUtil.addPopupListener;$$WPUtil.removePopupListener=function(a){if(a===null||typeof a==="undefined")a=$afe.jq("#main");var b=a.find(".popupiconcontainer");b.unbind();b.find(".popupinstructionsicon").unbind();b.find(".popupInstructions").unbind()};$$WPUtil.isValidPhoneNumber=function(b){var a=new RegExp(/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})?[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/);return a.test(b)};$$WPUtil.PrintAndAuditNET=function(){window.print();$.ajax({url:makeLink("Home/AuditPrint"),type:"POST",data:{title:document.title}})};$$WPUtil.clearAlertCache=function(){$.ajax(makeLink("inside.asp?mode=else&widgetName=alerts&clearAlerts=true"))};$$WPUtil.showLogoutPopup=function(d){var b="Documents.ESignatures",a="home/logout",c=new $$WPComp.MessageComponent({callback:function(){$$WP.Utilities.TryRedirect(makeLink(a))},TitleText:$$WP.Strings.get("popuptitletext",b),Message:d,ToolbarButtons:[new $$WPComp.ComplexObjects.Button($$WP.Strings.get("okaybutton",b),null,"otherbutton","")],IsClosable:false});$$WPUtil.quickPopup(c);window.setTimeout(function(){$$WP.Utilities.TryRedirect(makeLink(a))},1e4)};$$WPUtil.regExEscapeString=function WP$Utilities$regExEscapeString(b){var c,a;if(typeof b!=="string")return"";c="";for(a=0;a<b.length;a++)c+="\\u"+("0000"+b.charCodeAt(a).toString(16)).substr(-4);return c};$$WPUtil.IsSupportedChars=function WP$Utilities$IsSupportedChars(a){var b=new RegExp(/^[\x09\x0A\x0D\x20-\x7E\xA0-\xFF\u0152\u0153\u0160\u0161\u0178\u017D\u017E\u0192\u02C6\u02DC\u2013\u2014\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2026\u2030\u2039\u203A\u20AC\u2122]*$/);return b.test(a)};$$WPUtil.RemoveUnsupportedChars=function WP$Utilities$RemoveUnsupportedChars(a){return a.split("").filter($$WPUtil.IsSupportedChars).join("")};$$WPUtil.IsH2GActivity=function WP$Utilities$IsH2GActivity(b){var a=true;return $$WPUtil.IsVisitsListUrl(b)?a:$$WPUtil.IsTestResultsUrl(b)?a:$$WPUtil.IsMedsListUrl(b)?a:$$WPUtil.IsAllergiesListUrl(b)?a:$$WPUtil.IsHealthIssuesUrl(b)?a:false};$$WPUtil.IsVisitsListUrl=function WP$Utilities$IsVisitsListUrl(a){a=a.toLowerCase();return a.indexOf("visits/visitslist")!==-1||a.indexOf("mode=appointments")!==-1||a.indexOf("mode=visits")!==-1||a.indexOf("mode=recentappts")!==-1?true:false};$$WPUtil.IsTestResultsUrl=function WP$Utilities$IsTestResultsUrl(a){a=a.toLowerCase();return a.indexOf("clinical/testresults")!==-1||a.indexOf("mode=labs")!==-1?true:false};$$WPUtil.IsMedsListUrl=function WP$Utilities$IsMedsListUrl(a){a=a.toLowerCase();return a.indexOf("clinical/medications/list")!==-1||a.indexOf("mode=medslist")!==-1?true:false};$$WPUtil.IsAllergiesListUrl=function WP$Utilities$IsAllergiesListUrl(a){a=a.toLowerCase();return a.indexOf("clinical/allergies")!==-1||a.indexOf("mode=allergies")!==-1?true:false};$$WPUtil.IsHealthIssuesUrl=function WP$Utilities$IsHealthIssuesUrl(a){a=a.toLowerCase();return a.indexOf("clinical/healthissues")!==-1||a.indexOf("mode=hlthissues")!==-1?true:false};$$WPUtil.defaultAjaxErrorHandler=function WP$Utilities$defaultAjaxErrorHandler(i,b,c){var d="#content",g,f,j,a,e;if($$WP.IsEpicAjaxErrorHandlerDisabled===true)return;if(c.suppressEpicDefaultAjaxErrorHandler||c.error!==undefined||b.status===200){$$WP.Debug.IsEnabled&&$$WP.Debug.logError("Ajax call to "+c.url+" received an error response and has the default error handler suppressed.",true);return}if(b.statusText==="abort"||b.statusText==="canceled"){$$WP.Debug.IsEnabled&&$$WP.Debug.logError(b.statusText+" ajax call to "+c.url+".",true);return}if(c.error===undefined){e=$$WPContain.Popup.SizeEnum.SMALL;!$$WP.Debug.IsEnabled&&$afe.select(d).children().addClass("hidden");if($$WP.Debug.IsEnabled&&b.responseText!==undefined){a=b.responseText;a=a.substring(a.indexOf("<body"),a.indexOf("</body"));f=a.substring(a.indexOf(">")+1,a.length);e=$$WPContain.Popup.SizeEnum.LARGE}else f=$$WP.Strings.get("DefaultAjaxErrorHandlerMessage","global");g=new $$WPComp.MessageComponent({TitleText:$$WP.Strings.get("DefaultAjaxErrorHandlerTitle","global"),Message:f,ToolbarButtons:[new $$WPComp.ComplexObjects.Button("Close",null,"cancelworkflow")]});$$WPUtil.quickPopup(g,{Size:e,positioningFunction:$$WPContain.Positions.InsideNearTop,HasBackButton:false});$afe.select(d).removeAttr("id");$afe.select(".messageComponent").find(d).removeAttr("id")}};$$WPUtil.isLocalStorageAvailable=function WP$Utilities$isLocalStorageAvailable(){var a="test";try{window.localStorage.setItem(a,a);window.localStorage.removeItem(a)}catch(b){return false}return true};$$WPUtil.CalculateAndSetBodyHeight=function WP$Utilities$CalculateAndSetBodyHeight(d){var e=$afe.select("body"),b=$afe.select("#wrap"),c=$afe.select("#footer"),a;c.css("margin-top",-1*c.outerHeight()+"px");$afe.jq(window).trigger("matchColumnHeights");a=(e.height()-b.height())/2;a=Math.max(a,0);if(d)b.animate({top:a});else b.css("top",a)};$$WPUtil.UseHTML5InputControls=function $$WPUtil$UseHTML5InputControls(){var a="input";$$WP.Utilities.isBrowserCapableOf(a,{type:"number"})&&$afe.select("input[data-inputtype='number']").each(function(){this.type="number"});$$WP.Utilities.isBrowserCapableOf(a,{type:"phone"})&&$afe.select("input[data-inputtype='phone']").each(function(){this.type="phone"});$$WP.Utilities.isBrowserCapableOf(a,{type:"email"})&&$afe.select("input[data-inputtype='email']").each(function(){this.type="email"});$$WP.Utilities.isBrowserCapableOf(a,{type:"date"})&&$afe.select("input[data-inputtype='date']").each(function(){this.type="date"});$$WP.Utilities.isBrowserCapableOf(a,{type:"time"})&&$afe.select("input[data-inputtype='time']").each(function(){this.type="time"})}