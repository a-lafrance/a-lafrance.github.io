/*! Copyright (c) Epic Systems Corporation 2011 - 2018 */
if(typeof WP==="undefined")WP={};if(typeof WP.Comm==="undefined")WP.Comm={};WP.Comm.RESPONSETYPE_COMPLETE=2;WP.Comm.RESPONSETYPE_CONTENTONLY=1;WP.Comm.logOut=function(d,e,f,h){var a="function";e=e===true;h=h===true;f=f||"bye.asp";sessionStorage.clear();var g,i=makeLink("Home/LogOut?doRedirect="+(e?"true":"false")+"&logoutPage="+(f||"")),b,c;h&&typeof WP.Events.cancelBeforeUnload===a&&WP.Events.cancelBeforeUnload();typeof closeAllWindows===a&&closeAllWindows();if(e)c=function WP$Comm$logout$executeLogout(){window.location=i;typeof d===a&&d()};else{WP.Comm.logOut.count=0;g=typeof d!==a?null:function WP$Comm$logOut$internalAfterExecute(a){var e=a.indexOf('http-equiv="refresh"'),c;if(e>-1){c=a.indexOf("url=",e)+4;b=a.substring(c,a.indexOf('"',c));if(b.substr(0,1)===".")b=b.substr(2);b=HTMLUnencode(b)}if(++WP.Comm.logOut.count===2){delete WP.Comm.logOut.count;d(b||"")}};c=function WP$Comm$logout$executeLogout(){$.ajax({url:i,method:"GET",success:g});$.ajax({url:makeLink(f),method:"GET",success:g})}}if($$WP.IsPendingAJAXRequests){$$WP.PendingAJAXCallBack=c;window.setTimeout(function WP$Comm$logout$failSafeLogout(){if($$WP.PendingAJAXCallBack!==null&&typeof $$WP.PendingAJAXCallBack===a){$$WP.PendingAJAXCallBack();$$WP.PendingAJAXCallBack=null}},6e3)}else c();return false};WP.Comm.logOut.numExecutions=0;WP.CH5=String.fromCharCode(5);WP.Comm.startDigiD=function(b,a){clearElement(a);var c=new WP.Comm.AJAXHandler;c.init("digidprelogin.asp?startlogin=1",function(c){var g=WP.CH5,d,f,e;d=c.indexOf(g);e=c.substr(0,d);if(e.length>0){window.location=e;return}if(b)b.disabled=false;f=c.substr(d+1,c.indexOf(g,d+1)-1);$afe.jq(a).empty();createAlert(f||"The MyChart webserver could not be reached",true,a)},"GET","1",999);if(b)b.disabled=true;a.className="";$afe.jq(a).empty();a.appendChild(createElement("span"));$T(a.firstChild,"Please wait while we contact DigiD");a.firstChild.className="alert"};WP.Comm.keepAlive=function(){var b=0,a=function(a){if(a==="0")logOut();else++b===2&&window.setTimeout(WP.Comm.keepAlive,3e4)};if(window.location.href.indexOf("publicforms.asp")!==-1)return;++WP.Comm.keepAlive.counter;typeof intKeepalive==="function"&&intKeepalive();$.ajax({url:makeLink("keepalive.asp?cnt="+WP.Comm.keepAlive.counter),success:a,method:"GET",suppressEpicDefaultAjaxErrorHandler:true});window.location.href.indexOf("termpage.asp")===-1&&window.location.href.indexOf("oeinside.asp")===-1&&$.ajax({url:makeLink("Home/KeepAlive?cnt="+WP.Comm.keepAlive.counter),success:a,method:"GET",suppressEpicDefaultAjaxErrorHandler:true})};WP.Comm.keepAlive.counter=0