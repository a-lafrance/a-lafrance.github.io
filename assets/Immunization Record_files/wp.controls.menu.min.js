/*! Copyright (c) Epic Systems Corporation 2015-2018 */
WP=WP||{};WP.Controls=WP.Controls||{};WP.Controls.Menu=WP.Controls.Menu||function WP$Controls$Menu(){var a=$afe.select("#menu");if(a.length===0)return;var d,c,b;d=WP.Controls.Menu.getURL();c=a.find("li[role='none'] a[href*='mode="+d+"']");b=c.parents(".menugroup");b.length===1&&b.addClass("selected");WP.Controls.Menu.finishTopMenus(a);WP.Controls.Menu.bindKeypressEvents(a)};WP.Controls.Menu.getURL=function WP$Controls$Menu$getURL(){var o="proxyaccess",n="apptcancelpage",m="src=apptdetail",e="questionnairelist",l="medslist",k="hlthissues",g="messages",f="msgoptions",d="visits",j="Scheduling",i="apptmake",h,q,b,p,a,c;b=document.location.toString();a=$$WPUtil.queryString("mode");if(a===""){if(b.indexOf("inside.asp")>-1)return"";a=b.substr(window.location.protocol.length+2+window.location.host.length+makeLink("").length);if(a!==null&&a.indexOf("?")>0)a=a.substring(0,a.indexOf("?"));if(a.substr(-1)==="/")a=a.substring(0,a.length-1)}switch(a){case"fshreport":a="fshreportlist";break;case"cccsum":case"crmsum":a="cclist";break;case"accountdetail":case"recentpay":case"hbaccountdetail":case"hospaccntdetail":case"hospstmntdetail":case"payment":case"sboaccountdetail":case"paperless":case"Billing/Summary":case"Billing/Payment/MakePayment":a="accountsummary";break;case"Estimates":case"Estimates/SelectServiceArea":case"Estimates/GetEstimateServices":case"Estimates/GetEstimateDetails":a="patientestimates";break;case"FinancialAssistance/Index":a="financialassistance";break;case"Insurance/Coverages":case"insurancelegacy":case"benefitdetail":a="insurance";break;case"eligibility":case"claims":case"referrals":case"benefitinfo":case"hra":a="coverage";break;case"Insurance/PremiumPayment/PaymentLanding":case"Insurance/PremiumPayment/ShowPaymentResults":case"Insurance/PremiumAutoPay/Index":case"Insurance/PremiumAutoPay/Start":case"Insurance/PremiumAutoPay/Success":case"Insurance/PremiumAutoPay/Deactivate":case"Insurance/PremiumBilling":case"premiumpayment":a="premiumbilling";break;case"msgapptmake":case"tktapptmake":case"tickets":case"visitdetails":case"appointments":case"recentappts":case"visitsummary":case"itinerary":case i:case"apptsched":case"apptdetails":case"admissions":case"ippatientedu":case"copaypayment":case"echeckin":case"Visits/visitslist":case"Visits/VisitDetails":case j:case"Scheduling/OnMyWay/PostLogin":case"OpenScheduling/PostLogin":case"billing/visitpayment/LoadPaymentAmounts":a=d;break;case"editwalletcard":a="walletcard";break;case"Scheduling/PreAdmission/LDRegistration":case"Scheduling/PreAdmission/confirmation":a="stork";break;case"medadvice":case"custsvc":case"evisit":case"evisitpayment":case"EVisit/Index":a=f;break;case"HealthAdvisories":case"hmsched":a="healthmaint";break;case"labdetail":case"labchartgraph":case"displayscans":case"Clinical/TestResults":a="labs";break;case"Messaging/Review":a=g;break;case"Clinical/Allergies":a="allergies";break;case"Clinical/HealthIssues":a=k;break;case"Clinical/Medications/List":a=l;break;case"Clinical/Genomics":a="genomics";break;case"PlanOfCare":a="planofcare";break;case j:a="scheduling";break;case"AdvancedCarePlanning/CareDecision/Index":a="acp";break;case"Preferences":a="patprefs";break;case"SocialCareApplications":case"SocialCare/SocialCareApplications":case"SocialCare/ApplicationsDecisionTree/Load":a="socialcareapplications";break;case"Documents":case"Documents/DownloadMyRecord":case"Documents/Released":case"Documents/ViewDocuments":a="documents";break;case"Authentication/OAuth/Review":case"Authentication/OAuth/Authorize":a="oauthreview";break;case"SymptomChecker":case"SymptomChecker/History":case"SymptomChecker/SelfTriage/Load":a="symptomchecker";break;case"Research/ResearchStudies":a="researchstudies";break;case"ShareEverywhere/GenerateCode":a="sharecode";break;case"Community/Manage":a="communitymanage";break;case"PersonalInformation":a="personalinformation";break;case"showform":a=window.location.toString();a=a.substring(a.indexOf("mode=")+5);h=a.substring(a.length-20);if(h==="formname=ApptReqDept"||h==="formname=ApptReqProv")a="showform&formname=ApptReqCntr";break;case"Questionnaire/MyChartQuestionnaire/Questionnaires":case"questionnaireseriesoptout":a=e;break;case"questionnaire":if(b.indexOf("src=list")>0)a=e;else if(b.indexOf("mid")>0)a=g;else if(b.indexOf("evQtn")>0)a=f;else if(b.indexOf("svyQtn")>0)a=e;else if(b.indexOf("Qtn")>0)a=d;else if(b.indexOf("quesid")>0)a=e;break;case"apptcancel":if(b.indexOf(m)>0)a=d;else a=n;break;case"apptdircancel":if(b.indexOf(m)>0)a=d;else a=n;break;case"provsrch":if(b.indexOf("mnu=ds")>0)a=i;else if(b.indexOf("mnu=chg")>0)a="chgpcp";break;case"histques":if(b.indexOf("mid")>0)a=g;else if(b.indexOf("Qtn")>0)a=d;break;case"crr":if(b.indexOf("fromEv")>0)a=f;else if(b.indexOf("proccode")>0)a="labs";else if(b.indexOf("ndc")>0)a=l;else if(b.indexOf("icd")>0)a=k;break;case"pefltdtl":a="pefltlst";break;case"myclabdetails":a="mycondition";break;case o:if(b.indexOf("id=")>0){c=b;c=c.substring(c.indexOf("id=")+3);if(c.indexOf("&")>0)c=c.substring(0,c.indexOf("&"));a="proxyaccess&action=switchcontext&src=0&id="+c;p=o}}WP.Controls.Menu.prxMode=p;return a};WP.Controls.Menu.searchFocus=function WP$Menu$searchFocus(a){WP.Controls.Menu.dropOn(a);WP.Controls.Menu.preventClose++};WP.Controls.Menu.searchBlur=function WP$Menu$searchBlur(a){WP.Controls.Menu.preventClose--;WP.Controls.Menu.preventClose===0&&WP.Controls.Menu.closeMenu(a)};WP.Controls.Menu.finishTopMenus=function(b){var a=b.find(".menugroup");a.hover(WP.Controls.Menu.dropOn,WP.Controls.Menu.closeMenu).click(WP.Controls.Menu.VisibleMenuClickHandler).keydown(WP.Controls.Menu.VisibleMenuKeyDownHandler);a.each(function(){$afe.jq(this).find("li").last().find("a").keydown(WP.Controls.Menu.VisibleMenuLastAnchorKeyDownHandler)})};WP.Controls.Menu.HandleSearchBarFocus=function(b){var a;if(b.id==="keywordsearchwrapper"){a=$afe.select(".keywordsearch input[type=text]");a.length>0&&a.focus()}};WP.Controls.Menu.VisibleMenuClickHandler=function WP$Controls$Menu$VisibleMenuClickHandler(a){var b=$afe.jq(a.currentTarget);WP.Controls.Menu.dropOn(a);WP.Controls.Menu.HandleSearchBarFocus(b)};WP.Controls.Menu.VisibleMenuKeyDownHandler=function(b){var a=b||window.event,c=a.keyCode||a.which;c===9&&a.shiftKey===true&&WP.Controls.Menu.closeMenu(b)};WP.Controls.Menu.VisibleMenuLastAnchorKeyDownHandler=function(b){var a=b||window.event,c=a.keyCode||a.which;c===9&&a.shiftKey!==true&&WP.Controls.Menu.closeMenu(b)};WP.Controls.Menu.KeyHandler={27:true,32:true,37:true,38:true,39:true,40:true};WP.Controls.Menu.bindKeypressEvents=function(){var b="#moretabs a",a=".menugroup";$afe.select(a).keydown(function(e){var k="li[role='none']",i="li[role='none']:first-child a",c=".submenugroup",j=".submenu li[role='none']:first-child a",g="menuicon",f=".menuicon",h,d,b,l=e.keyCode||e.which;if(!WP.Controls.Menu.KeyHandler[l])return;h=$afe.jq(e.currentTarget).parents().andSelf().filter(a);d=$afe.jq(e.target);if(h.length>0){switch(l){case 27:if(WP.Controls.Menu.droppedMenu){h.find(f).focus();WP.Controls.Menu.closeMenu(e)}break;case 32:if(d.hasClass(g)){WP.Controls.Menu.dropOn(e);h.find(j).first().focus()}break;case 37:if(d.hasClass(g)){b=h.prev(a).find(f);if(b.length>0){WP.Controls.Menu.closeMenu(e);b.focus()}}else{b=d.parents(c).prev(c).find(i);b.length>0&&b.focus()}break;case 38:b=d.parent().prev(k).find("a");if(b.length>0)b.focus();else{b=d.parents(c).prev(c).find("li[role='none']:last-child a");if(b.length>0)b.focus();else{WP.Controls.Menu.closeMenu(e);h.find(f).focus()}}break;case 39:if(d.hasClass(g)){b=h.next(a).find(f);if(b.length>0){WP.Controls.Menu.closeMenu(e);b.focus()}}else{b=d.parents(c).next(c).find(i);b.length>0&&b.focus()}break;case 40:if(d.hasClass(g)){WP.Controls.Menu.dropOn(e);h.find(j).first().focus()}else{b=d.parent().next(k).find("a");if(b.length>0)b.focus();else{b=d.parents(c).next(c).find(i);b.length>0&&b.focus()}}}e.preventDefault()}});$afe.select("#proxies li a").keydown(function(c){var d=true,e="proxyTabs",f=c.keyCode||c.which;if(!WP.Controls.Menu.KeyHandler[f])return;if(c.target&&c.target.parentElement){var a=c.target.parentElement;switch(c.which){case 27:if(WP.Controls.Menu.droppedMenu&&c.target.parentElement.parentElement.id!==e){getChild(getChild(WP.Controls.Menu.droppedMenu,0),0).focus();WP.Controls.Menu.closeMenu(c)}break;case 38:if($afe.jq(a).index()>0)WP.Controls.Menu.handleSubMenuNavigation(a.previousElementSibling);else if(c.target.parentElement.parentElement.id!==e)if(!WP.Controls.Menu.handleParentMenuNavigation(a,false,d)){getChild(getChild(WP.Controls.Menu.droppedMenu,0),0).focus();WP.Controls.Menu.closeMenu(c)}break;case 39:WP.Controls.Menu.handleParentMenuNavigation(a,d);break;case 40:if(a.nextElementSibling)WP.Controls.Menu.handleSubMenuNavigation(a.nextElementSibling);else WP.Controls.Menu.handleParentMenuNavigation(a,d,d);break;case 37:if($afe.jq(a).safeAttr("id")==="moreTabsTab"){if($afe.select(b,a).length){var g=$afe.jq($afe.select(b,a)[$afe.select(b,a).length-1]);g.focus()}}else WP.Controls.Menu.handleParentMenuNavigation(a,false)}c.preventDefault()}});$afe.select(b).keydown(function(a){var c="#moreTabsTab a";if(a.which!==39&&a.which!==37&&a.which!==27)return;if(a.target){var d=a.target,b;switch(a.which){case 27:b=$afe.select(c)[0];break;case 39:if(d.nextElementSibling)b=d.nextElementSibling;else b=$afe.select(c)[0];break;case 37:if(d.previousElementSibling)b=d.previousElementSibling}$afe.jq(b).focus();a.preventDefault()}})};WP.Controls.Menu.handleParentMenuNavigation=function(e,d,f){var c="li",a=$afe.jq(e).closest(".menugroup:not([role='menu'])");if(a[0]){if(d&&a.next()[0])a=a.next()[0];else if(!d&&a.prev()[0])a=a.prev()[0];else return false;var b;if(f)b=d?0:$afe.select(c,a).length-1;else{b=$afe.jq(e).index();if(!$afe.select(c,a)[b])b=$afe.select(c,a).length-1}$afe.select("a",$afe.select(c,a)[b])&&$afe.select("a",$afe.select(c,a)[b]).focus();return true}};WP.Controls.Menu.handleSubMenuNavigation=function(b){var a;if(b){a=$afe.select("a",b)[0];a&&a.focus()}};WP.Controls.Menu.droppedMenu=null;WP.Controls.Menu.closeMenu=function(){if(WP.Controls.Menu.preventClose>0||!WP.Controls.Menu.droppedMenu)return;WP.Controls.Menu.droppedMenu.removeClass("droppeddown");$afe.select("[aria-hidden='false']",WP.Controls.Menu.droppedMenu).safeAttr("aria-hidden","true");WP.Controls.Menu.droppedMenu=null};WP.Controls.Menu.dropOn=function(e){var d="aria-hidden",c="[aria-hidden='true']",b="droppeddown";if(WP.Controls.Menu.preventClose>0)return;var a=$afe.jq(e.currentTarget);if(WP.Controls.Menu.droppedMenu){if(WP.Controls.Menu.droppedMenu===a)return;WP.Controls.Menu.droppedMenu.removeClass(b)}a.addClass(b);$afe.select(c,a).safeAttr(d,"false");a.filter(c).safeAttr(d,"false");WP.Controls.Menu.droppedMenu=a;return WP.Events.cancelEvent(e)}