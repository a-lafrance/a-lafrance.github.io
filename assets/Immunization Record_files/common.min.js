/*! Copyright (c) Epic Systems Corporation 2016-2017 */
var Epic=Epic||{};Epic.PatientAccess=Epic.PatientAccess||{};var $$WP=$$WP||Epic.PatientAccess;$$WP.Utilities=$$WP.Utilities||{};$$WP.Utilities.UI=$$WP.Utilities.UI||{};$$WP.Utilities.UI.Map=$$WP.Utilities.UI.Map||{};$$WP.Utilities.UI.Map.Support=$$WP.Utilities.UI.Map.Support||{};$$WP.Utilities.UI.MatchColumnHeightsOnHideAndShow=true;$$WP.Utilities.UI.SetContext=function $$WP$Utilities$UI$SetContext(){var a=$afe.select("body");$$WP.Utilities.UI.IsLoggedIn=a.hasClass("isInside");!$$WP.Utilities.UI.IsLoggedIn&&!a.hasClass("isPrelogin")&&$$WP.Debug.logError("Page body has neither isPrelogin nor isLoggedIn class. One or the other is required; assuming prelogin.");$$WP.Utilities.UI.IsMobile=$afe.select("html").hasClass("mobile");$$WP.Utilities.UI.IsOpenScheduling=a.hasClass("md_openscheduling_index");$$WP.Utilities.UI.IsOpenSchedulingWidget=a.hasClass("embedded");$$WP.Utilities.UI.IsSelfSignup=a.hasClass("md_standalone_signup");$$WP.Utilities.UI.IsFileUploader=a.hasClass("uploaderfileinput");$$WP.Utilities.UI.ContextSet=true};$$WP.Utilities.UI.OnPageLoad=function $$WP$Utilities$UI$OnPageLoad(d){if($$WP.Utilities.UI.PageLoaded===true)throw"Full UI Load called again after completion. This is forbidden.";d.type!=="load"&&$$WP.Debug.logError("Full UI Load called by an event other than Page Load.");var c=$afe.select("body"),g=$afe.select("#wrap"),f=$afe.select("form"),a;$$WP.Utilities.UI.SetContext();if($$WP.Utilities.UI.IsFileUploader===true)return;WP.Utils.minifyElement($afe.select("#header"));WP.Utils.minifyElement($afe.select("#content"));WP.Utils.minifyElement($afe.select("#footer"));$afe.select("#localeswitch").length>0&&$afe.select("#header").addClass("haslocaleswitch");a=".ghostInput input, .ghostInput select, .ghostInput textarea";g.on("focus",a,$$WP.Utilities.UI.FocusGhostableInput).on("blur change",a,$$WP.Utilities.UI.BlurGhostableInput).find(a).each($$WP.Utilities.UI.BlurGhostableInput);a=".counterInput";g.on("click",a,$$WP.Utilities.UI.ClickCounterInput);f.submit(function(){$afe.jq(window).trigger("formSubmit")});window.setTimeout(function(){WP.DOM.Browser.isWebKit&&f.find("input:-webkit-autofill").each($$WP.Utilities.UI.FocusGhostableInput)},50);$$WP.Utilities.UI.ResizePage(d);$afe.select(".cssSwitcher").click(function(b){var a;if(b&&b.currentTarget.nodeName==="A")a=b.currentTarget.getAttribute("data-csstitle");if(a.length===0)return;$$WP.Utilities.UI.ActivateStylesheet(a)});var b=$$WP.Utilities.UI.GetAlternateStylesheetIfActive();b&&b.length>0&&$$WP.Utilities.UI.ActivateStylesheet(b);$$WP.Utilities.UI.IsMobile&&$$WP.Utilities.UI.Map.mobile(d);if(c.hasClass("passthru")){$$WP.CommunityUtilities.checkIfCommunityJumpIsValid();$afe.jq(window).on("message",$$WP.CommunityUtilities.externalJumpMessageListener);$afe.select("a[href*='mode=other']").remove()}c.addClass("ready");$$WP.Utilities.UI.IsLoggedIn&&$afe.select(".component").trigger("resize");if(navigator.userAgent.match(/Trident\/7./))c.on("mousewheel",function(a){if(isDataTile())return;if(!$afe.select("body").hasClass("scrollDisabled")){var c=window.pageYOffset,b=a.originalEvent.wheelDelta;if(a.ctrlKey)return;a.preventDefault();window.scrollTo(window.pageXOffset,c-b)}});$$WP.Utilities.UI.PageLoaded=true;for(var e=0;e<$$WP.Utilities.UI._onUIFrameworkLoadedCallbacks.length;e++)$$WP.Utilities.UI._onUIFrameworkLoadedCallbacks[e]()};$$WP.Utilities.UI._onUIFrameworkLoadedCallbacks=[];$$WP.Utilities.UI.OnUIFrameworkLoaded=function WP$Utilities$UI$OnUIFrameworkLoaded(a){if($$WP.Utilities.UI.PageLoaded)a();else $$WP.Utilities.UI._onUIFrameworkLoadedCallbacks.push(a)};$$WP.Utilities.UI.ResizePage=function $$WP$Utilities$UI$ResizePage(a){var c="triggeredBySetAppropriate",b=true;if(!$$WP.Utilities.UI.ContextSet===b){$$WP.Debug.logError("ResizePage called before context was set. You should not call any part of the UI Framework before OnPageLoad has finished.");return}if($$WP.Utilities.UI.CurrentlyResizing===b){$$WP.Debug.log("WARNING: ResizePage called again before resize could finish.");return}if(isDataTile()&&WP.DOM.Browser.isSafari&&$$WP.Utilities.UI.SkipResizeAfterMatchColumnHeights===b){$$WP.Debug.log("WARNING: ResizePage called because of MatchColumnHeights call, skipping");$$WP.Utilities.UI.SkipResizeAfterMatchColumnHeights=false;return}var d=$afe.select("body");if(isDataTile()&&d.prop(c)&&a.type!=="load"){d.prop(c,false);return}if($$WP.Utilities.UI.IsFileUploader===b)return;$$WP.Utilities.UI.CurrentlyResizing=b;if($$WP.Utilities.UI.IsLoggedIn)$$WP.Utilities.UI.Map.inside(a);else $$WP.Utilities.UI.Map.prelogin(a);$$WP.Utilities.UI.PageMode(a);$$WP.Utilities.UI.SupportFiles(a);!$$WP.Utilities.UI.IsMobile&&$$WP.Utilities.UI.MatchColumnHeights(a);$$WP.Utilities.UI.CurrentlyResizing=false};$$WP.Utilities.UI.MatchColumnHeights=function $$WP$Utilities$UI$MatchColumnHeights(){var f="#content",e="min-height",a=true;if(isDataTile()&&WP.DOM.Browser.isSafari)$$WP.Utilities.UI.SkipResizeAfterMatchColumnHeights=a;if(!$$WP.Utilities.UI.ContextSet===a){$$WP.Debug.logError("MatchColumnHeights called before context was set. You should not call any part of the UI Framework before OnPageLoad has finished.");return}if($$WP.Utilities.UI.CurrentlyMatching===a){$$WP.Debug.log("WARNING: MatchColumnHeights called again before matching could finish.");return}if($$WP.Utilities.UI.IsMobile||$$WP.Utilities.UI.IsOpenSchedulingWidget)return;$$WP.Utilities.UI.CurrentlyMatching=a;var d=$afe.select("body"),h=$afe.select("#wrap"),g=$afe.select("#content, #content #main, #content #sidebar"),c=0,b=0;g.css(e,"");b=$afe.select("#footer").height();if(($$WP.Utilities.UI.IsLoggedIn||$$WP.Utilities.UI.IsOpenScheduling||$$WP.Utilities.UI.IsSelfSignup)&&!$afe.select("html").hasClass("datatile"))c=$afe.jq(window).height()-b;if($afe.select(".shareeverywhere").length>0){var i=parseInt($afe.select(f).css("padding-top"));$afe.select("#main").css("height",c-$afe.select("#patient_name_container").outerHeight()-$afe.select("#directmessage").outerHeight()-i)}else g.css(e,Math.max(c,$afe.select(f).height(),$afe.select("#content #main").height(),$afe.select("#content #sidebar").height())+b);if(h.height()>d.height()||$$WP.Utilities.UI.IsOpenScheduling||$$WP.Utilities.UI.IsSelfSignup){d.addClass("tall");h.css("top","")}else d.removeClass("tall");setAppropriateHeight();$$WP.Utilities.UI.CurrentlyMatching=false};$$WP.Utilities.UI.PageMode=function $$WP$Utilities$UI$PageMode(c){var a,b=$afe.select("body");if(WP.DOM.Browser.IEVersion!==8){a=b.prop("class").split(" ").filter(function(a){return/md_.*/.exec(a)});a=a&&a.length>0?a[0].substr(3):null;a&&typeof $$WP.Utilities.UI.Map[a]==="function"&&$$WP.Utilities.UI.Map[a](c)}};$$WP.Utilities.UI.SupportFiles=function $$WP$Utilities$UI$SupportFiles(b){var a;for(a in $$WP.Utilities.UI.Map.Support){if(!$$WP.Utilities.UI.Map.Support.hasOwnProperty(a))continue;typeof $$WP.Utilities.UI.Map.Support[a]==="function"&&$$WP.Utilities.UI.Map.Support[a](b)}};$$WP.Utilities.UI.FocusGhostableInput=function $$WP$Utilities$UI$FocusGhostableInput(){$afe.jq(this).parent().addClass("ghosted")};$$WP.Utilities.UI.BlurGhostableInput=function $$WP$Utilities$UI$BlurGhostableInput(){var b="ghosted",a=$afe.jq(this),c=a.parent();if(a.hasClass("hidden")||a.safeAttr("type")==="hidden")return;if(a.is("select")&&a.find('option[value="'+a.val()+'"]').text().trim().length===0)c.removeClass(b);else if(a.val().length>0)c.addClass(b);else c.removeClass(b)};$$WP.Utilities.UI.ClickCounterInput=function $$WP$Utilities$UI$ClickCounterInput(d){var c=$afe.jq(this),a=c.find("input"),b=a.val();if(d.target===this){if(d.offsetX<c.width()/2)a.val(b*1-1);else a.val(b*1+1);a.change();a.is("[data-invalid]")&&a.val(b);a.blur()}};$$WP.Utilities.UI.ToggleButtonClick=function $$WP$Utilities$UI$ToggleButtonClick(i,j,h){var b=false,d="checked",c="wasChecked",a=$afe.jq(i),e,g,f;typeof a.prop(c)==="undefined"&&a.is("[checked='checked']")&&a.prop(c,a.prop(d));f=a.prop("type");if(a.prop(c)){if(f==="radio"&&h)return b;a.prop(d,b)}a.prop(c,a.prop(d));a.parents("form").first().change();if(f==="radio"){g=a.prop("name");e=$afe.select("input[name='"+g+"']").not(a);e.prop({checked:b,wasChecked:b});e.trigger("input")}a.trigger("input");return b};$$WP.Utilities.UI.ActivateStylesheet=function $$WP$Utilities$UI$ActivateStylesheet(a){var e="undefined",d="data-altstylesheet",c="disabled",g=makeLink("").replace(new RegExp("/","g"),"").toLowerCase(),f="userstylesheet4"+g,b;if(!a||a.length===0)return;switch(a){case"Default":$afe.select("link[title]").safeAttr("rel","alternate stylesheet").prop(c,true);$afe.select("html").removeAttr(d);$$WPUtil.isLocalStorageAvailable()&&typeof window.localStorage!==e&&localStorage.removeItem(f);break;default:$afe.select("link[title='"+a+"']").safeAttr("rel","stylesheet").prop(c,false);$afe.select("html").safeAttr(d,a);$$WPUtil.isLocalStorageAvailable()&&typeof window.localStorage!==e&&localStorage.setItem(f,a)}typeof $$WP.Utilities.UI.StyleSheetAdjustment[a]==="function"&&$$WP.Utilities.UI.StyleSheetAdjustment[a]();for(b=0;b<$$WP.Utilities.UI._onStylesheetActivatedListeners.length;b++)$$WP.Utilities.UI._onStylesheetActivatedListeners[b].callback(a,$$WP.Utilities.UI._onStylesheetActivatedListeners[b].contextData)};$$WP.Utilities.UI._onStylesheetActivatedListeners=[];$$WP.Utilities.UI.s_nextStylesheetActivatedListenerId=1;$$WP.Utilities.UI.OnStylesheetActivated=function WP$Utilities$UI$OnStylesheetActivated(a,b){(!a||!$.isFunction(a))&&$$WP.Debug.logError("OnStylesheetActivated callback is not a function");var c={callback:a,contextData:b,listenerId:$$WP.Utilities.UI.s_nextStylesheetActivatedListenerId++};$$WP.Utilities.UI._onStylesheetActivatedListeners.push(c);return $$WP.Utilities.UI.s_nextStylesheetActivatedListenerId};$$WP.Utilities.UI.GetAlternateStylesheetIfActive=function $$WP$Utilities$UI$GetAlternateStylesheetIfActive(){var a,c,b;if($$WPUtil.isLocalStorageAvailable()&&typeof window.localStorage!=="undefined"&&!$$WP.Utilities.UI.IsMobile){a=makeLink("").replace(new RegExp("/","g"),"").toLowerCase();c="userstylesheet4"+a;b=localStorage.getItem(c)}return b};$$WP.Utilities.UI.ReloadGraphs=function $$WP$Utilities$UI$ReloadGraphs(){typeof loadGraphs==="function"&&loadGraphs()};$$WP.Utilities.UI.StyleSheetAdjustment={Default:$$WP.Utilities.UI.ReloadGraphs,"High Contrast":$$WP.Utilities.UI.ReloadGraphs};$$WP.Utilities.UI.IsHighContrast=function $$WP$Utilities$UI$IsHighContrast(){return document.documentElement.getAttribute("data-altstylesheet")==="High Contrast"};$afe.jq(window).load($$WP.Utilities.UI.OnPageLoad).resize($$WP.Utilities.UI.ResizePage).on("matchColumnHeights",$$WP.Utilities.UI.MatchColumnHeights).on("componentRendered",$$WP.Utilities.UI.MatchColumnHeights).on("formSubmit",$$WP.Utilities.UI.MatchColumnHeights)