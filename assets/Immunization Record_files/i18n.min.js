/*! Copyright (c) Epic Systems Corporation 2016 */
(function WP$I18N$definition(){var b="",c="Core.FormValidation",a=null;$$WP.I18N=$$WP.I18N||{DateFormat:a,TimeFormat:a,TimeSeparator:a,AmDesignator:a,PmDesignator:a,DecimalSeparator:a,NegativePattern:a,CenturyRollover:15};$$WP.I18N.getDateFormatForDisplay=function WP$I18N$getDateFormatForDisplay(){return this.DateFormat.toLowerCase().replace(/m+/g,$$WP.Strings.get("MM",c)).replace(/d+/g,$$WP.Strings.get("DD",c)).replace(/y+/g,$$WP.Strings.get("YYYY",c))};$$WP.I18N.getTimeFormatForDisplay=function WP$I18N$getTimeFormatForDisplay(){return this.TimeFormat.toLowerCase().replace(/h+/g,$$WP.Strings.get("HH",c)).replace(/m+/g,$$WP.Strings.get("MI",c)).replace(/t+/g,$$WP.Strings.get("TT",c))};$$WP.I18N.formatPatientGivenDate=function WP$I18N$formatPatientGivenDate(d){var a,c;if(!(d instanceof Date))return b;c=$$WP.I18N.DateFormat.toLowerCase();a={day:d.getUTCDate(),month:d.getUTCMonth()+1,year:("0000"+d.getUTCFullYear()).substr(-4)};if(a.day<10&&c.indexOf("dd")>-1)a.day="0"+a.day;if(a.month<10&&c.indexOf("mm")>-1)a.month="0"+a.month;if(c.indexOf("yyyy")===-1)a.year=(a.year+b).substring(2,4);return c.replace(/d+/,a.day).replace(/m+/,a.month).replace(/y+/,a.year)};$$WP.I18N.parseDate=function WP$I18N$parseDate(g){var j,b,i,h,e,d,c,f,m,l,n,k;if(typeof g!=="string"||/[a-zA-Z]/.test(g))return a;g=g.trim();j=$$WP.I18N.DateFormat.toLowerCase().replace(/[^ymd]*([ymd])+[^ymd]*/g,"$1");m=j.indexOf("d");l=j.indexOf("m");n=j.indexOf("y");b=g.split(/[^\d]+/);if(b.length!==2&&b.length!==3)return a;for(k=0;k<b.length;k++)if(b[k].length===0)return a;f=(new Date).getFullYear();if(b.length===2){d=f;if(l<m){h=Number(b[0]);i=Number(b[1])}else{i=Number(b[0]);h=Number(b[1])}}else if(b.length===3){e=b[n];if(e.length===2||e.length===1){d=Number(e);d+=f-f%100;if(d>f+$$WP.I18N.CenturyRollover)d-=100}else if(e.length===4)d=Number(e);else return a;h=Number(b[l]);i=Number(b[m])}c=new Date(0);c.setUTCFullYear(d);c.setUTCMonth(h-1);c.setUTCDate(i);return c.getUTCDate()!==i||c.getUTCMonth()!==h-1||c.getUTCFullYear()!==d?a:c};$$WP.I18N.formatPatientGivenTime=function WP$I18N$formatPatientGivenTime(d){var a,c,e;if(!(d instanceof Date))return b;c=$$WP.I18N.TimeFormat.toLowerCase();e=c.indexOf("t")>-1;a={hour:d.getUTCHours(),minute:d.getUTCMinutes(),amPm:b};if(e)if(a.hour>=12){a.amPm=$$WP.I18N.PmDesignator;if(a.hour>12)a.hour=a.hour-12}else{a.amPm=$$WP.I18N.AmDesignator;if(a.hour===0)a.hour=12}if(c.indexOf("hh")>-1)if(a.hour<10)a.hour="0"+a.hour;if(a.minute<10)a.minute="0"+a.minute;return c.replace(/h+/,a.hour.toString()).replace(/m+/,a.minute.toString()).replace(/t+/,a.amPm)};$$WP.I18N.parseTime=function WP$I18N$parseTime(g){var d=this,c,j,f,e,h,i;if(typeof g!=="string")return a;g=g.toLocaleLowerCase().replace(/\s/g,b);h=$$WP.I18N.AmDesignator.toLocaleLowerCase();i=$$WP.I18N.PmDesignator.toLocaleLowerCase();c=g.match(new RegExp("[a-z]+|[0-9]{1,2}","g"));if(c===a||c.length!==1&&c.length!==2&&c.length!==3)return a;for(j=0;j<c.length;j++)if(c[j].length===0)return a;if(c.length===2||c.length===3)if(!isNaN(Number(c[0]))&&!isNaN(Number(c[1]))&&c[0].length===2&&c[1].length===1&&g.indexOf(c[0]+b+c[1])>-1){c[1]=c[0].charAt(1)+b+c[1];c[0]=c[0].charAt(0)}f=d._validateHours(c[0]);if(f===a)return a;if(c.length===1)return d._buildTime(f,0);else if(c.length===2)if(c[1]!==h.substring(0,c[1].length)&&c[1]!==i.substring(0,c[1].length)){e=d._validateMinutes(c[1]);return e===a?a:d._buildTime(f,e)}else return d._buildTime(f,0,c[1],h,i);else{e=d._validateMinutes(c[1]);return e===a?a:d._buildTime(f,e,c[2],h,i)}return a};$$WP.I18N._validateHours=function WP$I18N$_validateHours(c){var b=Number(c);return isNaN(b)?a:b<0||b>23?a:b};$$WP.I18N._validateMinutes=function WP$I18N$_validateMinutes(c){var b;if(c.length!==2)return a;b=Number(c);return isNaN(b)?a:b<0||b>59?a:b};$$WP.I18N._accountForAmPm=function WP$I18N$_accountForAmPm(b,c,d,e){if(b<1||b>12)return a;if(c===d.substring(0,c.length)){if(b===12)b=0}else if(c===e.substring(0,c.length)){if(b!==12)b=b+12}else return a;return b};$$WP.I18N._buildTime=function WP$I18N$_buildTime(c,g,d,e,f){var b;if(d){c=this._accountForAmPm(c,d,e,f);if(c===a)return a}b=new Date(0);b.setUTCHours(c);b.setUTCMinutes(g);return b};$$WP.I18N.parse24HrTime=function WP$I18N$parse24HrTime(f){var e,c,d,b;e=RegExp("^[0-9]{1,2}:{1}[0-9]{2}$");if(!e.test(f))return a;c=f.split(":");d=$$WP.I18N._validateHours(c[0]);if(d===a)return a;b=$$WP.I18N._validateMinutes(c[1]);return b===a?a:$$WP.I18N._buildTime(d,b)};$$WP.I18N.formatNumber=function WP$I18N$formatNumber(k,d,l){var c,j,a,h,i,e,f,g;if(typeof k!=="number")return b;d=d||0;j=Math.abs(k);a=Math.floor(j);g=j.toString().length-a.toString().length-1;if(l)g=d;if(g<0)g=0;h=(j-a).toFixed(g);i=+h;if(d>0){e=i.toFixed(d);f=+e;if(l){if(f>=1){a+=1;e=(f-1).toFixed(d)}c=a.toFixed(0)+$$WP.I18N.DecimalSeparator+e.substring(2)}else if(i===0)c=a;else if(h.substring(2).length<=d)c=a.toFixed(0)+$$WP.I18N.DecimalSeparator+h.substring(2);else{if(f>=1){a+=1;e=(f-1).toFixed(d)}if(f>0)c=a.toFixed(0)+$$WP.I18N.DecimalSeparator+e.substring(2);else c=a.toFixed(0)}}else if(i>=.5)c=(a+1).toFixed(0);else c=a.toFixed(0);if(k<0)c=$$WP.I18N.NegativePattern.replace("n",c);return c};$$WP.I18N.parseCurrency=function WP$I18N$parseCurrency(b){var a=$$WP.Currency.Helpers.currencyToNumber(b);return isNaN(a)?NaN:a};$$WP.I18N.parseNumber=function WP$I18N$parseNumber(a){var d,l,p,e,g,h,m,i,n,o,k,c,j,f;a+=b;if(a.length===0)return NaN;p=$$WP.Utilities.regExEscapeString("n");e=$$WP.Utilities.regExEscapeString($$WP.I18N.DecimalSeparator);g=$$WP.Utilities.regExEscapeString($$WP.I18N.NegativePattern).replace(p,"n");h=g.replace("n",b);a=a.trim();m=new RegExp("[^\\d"+e+h+"]");if(m.test(a))return NaN;i="((\\d+("+e+"\\d*)?)|("+e+"\\d+))";n=new RegExp("^"+g.replace("n",i)+"$");k=n.test(a);c=a;if(k)c=a.replace(new RegExp("["+h+"]","g"),b);o=new RegExp("^"+i+"$");if(!o.test(c))return NaN;j=0;f=0;if(c.charAt(0)===$$WP.I18N.DecimalSeparator)f=Number(c.substring(1))/Math.pow(10,c.length-1);else{d=c.split($$WP.I18N.DecimalSeparator);j=Number(d[0]);if(d.length>1)f=Number(d[1])/Math.pow(10,d[1].length)}l=j+f;if(k)l*=-1;return l}})();$$WP.Debug.UnitTest=$$WP.Debug.UnitTest||{};$$WP.Debug.UnitTest.tests=$$WP.Debug.UnitTest.tests||[];$$WP.Debug.UnitTest.tests.push(function UnitTests$I18N$numbers(){var e=123.5,d=123.4,f=1234.234,a,b,c,g,h;a=$$WP.Debug.UnitTest.assert;g=$$WP.I18N.DecimalSeparator;h=$$WP.I18N.NegativePattern;$$WP.I18N.DecimalSeparator=",";$$WP.I18N.NegativePattern="(n)";b=$$WP.I18N.parseNumber;c=$$WP.I18N.formatNumber;a(b("1234")===1234,"Failed to parse number string: '1234'");a(b(" 1234")===1234,"Failed to parse number string: ' 1234'");a(b("1,0")===1,"Failed to parse number string: '1,0'");a(b("1,234")===1.234,"Failed to parse number string: '1,234'");a(b("1234,234")===f,"Failed to parse number string: '1234,234'");a(b(" 1234,234")===f,"Failed to parse number string: ' 1234,234'");a(b("(1)")===-1,"Failed to parse number string: '(1)'");a(b("(1234)")===-1234,"Failed to parse number string: '(1234)'");a(b("(1,0)")===-1,"Failed to parse number string: '(1,0)'");a(b("(1,234)")===-1.234,"Failed to parse number string: '(1,234)'");a(b("(1234,234)")===-f,"Failed to parse number string: '(1234,234)'");a(isNaN(b("abc")),"Did not reject invalid number string: 'abc'");a(isNaN(b("((123")),"Did not reject invalid number string: '((123'");a(isNaN(b("(123,,0")),"Did not reject invalid number string: '(123,,0'");a(isNaN(b("(123,0,0")),"Did not reject invalid number string: '(123,0,0'");a(isNaN(b("(123(")),"Did not reject invalid number string: '(123('");a(isNaN(b("(123,0(")),"Did not reject invalid number string: '(123,0('");a(isNaN(b("(1.123,0)")),"Did not reject invalid number string: '(1.123,0)'");a(isNaN(b("(1.234)")),"Did not reject invalid number string: '(1.234)'");a(isNaN(b("(1.234,234)")),"Did not reject invalid number string: '(1.234,234)'");a(c(123)==="123","Did not properly format 123 as '123'");a(c(d)==="123","Did not properly format 123.4 as '123'");a(c(d,1)==="123,4","Did not properly format 123.4 as '123.4'");a(c(e)==="124","Did not properly format 123.5 as '124'");a(c(e,3)==="123,5","Did not properly format 123.5 as '123.5'");a(c(-123)==="(123)","Did not properly format -123 as '(123)'");a(c(-d)==="(123)","Did not properly format -123.4 as '(123)'");a(c(-d,1)==="(123,4)","Did not properly format -123.4 as '(123,4)'");a(c(-e)==="(124)","Did not properly format -123.5 as '(124)'");a(c(-e,3)==="(123,5)","Did not properly format -123.5 as '(123,5)'");a(c(10.99999,3)==="11,000","Did not properly format 10.99999 as '11,000'");$$WP.I18N.DecimalSeparator=g;$$WP.I18N.NegativePattern=h});$$WP.Debug.UnitTest.tests.push(function UnitTests$I18N$dates(){var f="Invalid date string was not rejected.",e=null,r="1975-09-10",m="10-9-75",q="1975-10-09",l="10-9-16",k=" 10 / 9 - 2016 ",c="Date parsed incorrectly.",j="10/9/2016",h="2016-10-09",p="MM/dd/yyyy",o="0123-02-01",i="Failed to format date ",d="2016-09-10",s,a,b,g,n;s=$$WP.Debug.UnitTest.assert;a=$$WP.Debug.UnitTest.assertValue;n=$$WP.I18N.DateFormat;b=$$WP.I18N.parseDate;g=$$WP.I18N.formatPatientGivenDate;$$WP.I18N.DateFormat="MM/dd/YYYY";a("09/10/2016",g(new Date(d)),i);a("02/01/0123",g(new Date(o)),i);$$WP.I18N.DateFormat="M/d/YY";a("9/10/16",g(new Date(d)),i);a("2/1/23",g(new Date(o)),i);a("10/11/16",g(new Date("2016-10-11")),i);$$WP.I18N.DateFormat=p;a(+new Date(h),b(j).getTime(),c);a(+new Date(h),b(k).getTime(),c);a(+new Date(h),b(l).getTime(),c);a(+new Date(q),b(m).getTime(),c);a(+new Date("2016-02-29"),b("2-29-16").getTime(),c);a(+new Date("2016-12-31"),b("12-31-16").getTime(),c);a(+new Date("2016-01-01"),b("1-1-16").getTime(),c);a(+new Date((new Date).getFullYear()+"-01-01"),b("1-1").getTime(),c);$$WP.I18N.DateFormat="M/d/y";a(+new Date(h),b(j).getTime(),c);a(+new Date(h),b(k).getTime(),c);a(+new Date(h),b(l).getTime(),c);a(+new Date(q),b(m).getTime(),c);$$WP.I18N.DateFormat="dd-MM-yyyy";a(+new Date(d),b(j).getTime(),c);a(+new Date(d),b(k).getTime(),c);a(+new Date(d),b(l).getTime(),c);a(+new Date(r),b(m).getTime(),c);$$WP.I18N.DateFormat="dd yyyy mm";a(+new Date(d),b("10/2016/9").getTime(),c);a(+new Date(d),b(" 10 / 2016 - 9 ").getTime(),c);a(+new Date(d),b("10-16-9").getTime(),c);a(+new Date(r),b("10-75-9").getTime(),c);$$WP.I18N.DateFormat=p;a(e,b("January 1, 2016"),f);a(e,b("10/9/16 AD"),f);a(e,b("2/29/15"),f);a(e,b("0/1/2016"),f);a(e,b("1/1/"),f);a(e,b("/1/1"),f);a(e,b("/1/1/"),f);a(e,b("//1//1//"),f);$$WP.I18N.DateFormat=n})